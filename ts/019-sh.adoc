= TS-19: Unix Shells
:toc: macro
:toc-title: Contents

This technical standard covers best practices for writing Unix shell scripts, which are commonly used for system administration, automating tasks, and doing batch processing. See also link:./019a-bash.adoc[TS-19a: Bash] for extended technical standards for the Bash shell specifically.

toc::[]

== Choice of shells

When writing shell scripts, it is important to consider the target environment and the particular Unix shell that will be available to execute the script in that environment.

If in doubt, the Bourne Again Shell (`bash`) is a good choice, as it is widely available – it is the most common implementation of a Unix shell in Linux distributions, it's bundled with macOS (though not enabled by default), and a version is also available for Windows – and it has many custom features that make it particularly suitable for scripting.

== Portability

If portability between different Unix shells is a requirement, it is best to stick to POSIX-compliant features and avoid shell-specific extensions. For example, Bash's `[[ ... ]]` syntax is not POSIX compliant, and in fact this proprietary syntax has been adopted by other shells but it does not always do the same thing – which could lead to inconsistent behavior if the same script is run in different shells.

Many Unix shells have a "POSIX mode" that allow you to test a script's POSIX compliance by disabling any non-POSIX features of the shell when the script is run. For example, Bash can be run in POSIX using the commands `sh` or `bash --posix`; alternatively, either of the following hashbangs can be added to the top of the script (the second one is a bit less portable).

----
#!/bin/env sh
#!/bin/sh
----

Dylan Araps's https://github.com/dylanaraps/pure-sh-bible[Pure SH bible], a collection of pure-POSIX shell scripts, is an invaluable resource, too.

''''

== References

* https://google.github.io/styleguide/shell.xml[Google's shell style guide]

* https://github.com/dylanaraps/pure-sh-bible[Pure SH bible] by Dylan Araps
